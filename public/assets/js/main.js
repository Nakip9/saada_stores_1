// Language Data
const translations = {
    en: {
        home: "Home",
        about: "About Us",
        products: "Products",
        contact: "Contact",
        heroTitle: "Premium Car Parts & Accessories",
        heroSubtitle: "The exclusive agent for Beklemer Turkish Company in Yemen.",
        shopNow: "Shop Now",
        learnMore: "Learn More",
        featuredProducts: "Featured Products",
        viewAll: "View All",
        footerText: "© 2024 Saada Store. All rights reserved.",
        aboutTitle: "About Us",
        aboutSubtitle: "A story of success and excellence in the world of auto parts",
        ourStory: "Our Story",
        storyText1: "Saada Store was founded with a clear vision to provide the best auto parts in the Yemeni market. We believe that quality is the foundation of safety, so we strive to provide original and reliable products to our valued customers.",
        storyText2: "We are proud to be the exclusive agent for Beklemer Turkish Company in Yemen, allowing us to offer high-quality products with European standards and competitive prices.",
        partnershipTitle: "Our Partnership with Beklemer",
        partnershipText: "Beklemer is a leading Turkish company in auto parts manufacturing. As their sole agent in Yemen, we guarantee our customers original and guaranteed parts directly from the factory.",
        feature1: "High European Quality",
        feature2: "Real Warranty",
        feature3: "Competitive Prices",
        teamTitle: "Our Team",
        manager: "General Manager",
        sales: "Sales Manager",
        support: "Customer Service"
    },
    ar: {
        home: "الرئيسية",
        about: "من نحن",
        products: "منتجاتنا",
        contact: "تواصل معنا",
        heroTitle: "قطع غيار وإكسسوارات سيارات متميزة",
        heroSubtitle: "الوكيل الحصري لشركة بيكمير التركية في اليمن.",
        shopNow: "تسوق الآن",
        learnMore: "اعرف المزيد",
        featuredProducts: "منتجات مميزة",
        viewAll: "عرض الكل",
        footerText: "© 2024 محلات صعده. جميع الحقوق محفوظة.",
        aboutTitle: "من نحن",
        aboutSubtitle: "قصة نجاح وتميز في عالم قطع غيار السيارات",
        ourStory: "قصتنا",
        storyText1: "تأسست محلات صعده برؤية واضحة لتوفير أفضل قطع غيار السيارات في السوق اليمني. نحن نؤمن بأن الجودة هي أساس السلامة، ولذلك نسعى جاهدين لتقديم منتجات أصلية وموثوقة لعملائنا الكرام.",
        storyText2: "نفتخر بكوننا الوكيل الحصري لشركة بيكمير (Beklemer) التركية في اليمن، مما يتيح لنا تقديم منتجات عالية الجودة بمعايير أوروبية وأسعار تنافسية.",
        partnershipTitle: "شراكتنا مع بيكمير",
        partnershipText: "تعتبر شركة بيكمير التركية من الشركات الرائدة في مجال تصنيع قطع غيار السيارات. بصفتنا الوكيل الوحيد في اليمن، نضمن لعملائنا الحصول على قطع غيار أصلية ومضمونة مباشرة من المصنع.",
        feature1: "جودة أوروبية عالية",
        feature2: "ضمان حقيقي",
        feature3: "أسعار تنافسية",
        teamTitle: "فريقنا",
        manager: "General Manager",
        sales: "Sales Manager",
        support: "Customer Service",
        productsTitle: "Our Products",
        productsSubtitle: "Discover our wide range of original spare parts",
        all: "All",
        batteries: "Batteries",
        brakes: "Brakes",
        solar: "Solar Energy",
        parts: "Spare Parts",
        askPrice: "Ask for Price",
        prod1Title: "70 Amp Battery",
        prod1Desc: "High performance and long life",
        prod2Title: "Front Brake Pads",
        prod2Desc: "Compatible with Toyota",
        prod3Title: "150W Solar Panel",
        prod3Desc: "High efficiency",
        prod4Title: "Engine Repair Kit",
        prod4Desc: "Original parts",
        prod5Title: "Rear Brake Pads",
        prod5Desc: "Beklemer Quality",
        contactTitle: "Contact Us",
        contactSubtitle: "We are here to help you find what you need",
        getInTouch: "Get in Touch",
        address: "Sana'a, Yemen - Taiz Street",
        name: "Name",
        email: "Email",
        message: "Message",
        sendMessage: "Send Message",
        missionTitle: "Our Vision & Mission",
        missionText: "At Saada Store, we strive to provide the best auto parts solutions in Yemen, focusing on quality and reliability. Our partnership with Beklemer guarantees you long-lasting products that ensure your vehicle's safety.",
        quality: "High Quality",
        price: "Competitive Price",
        service: "Excellent Service"
    },
    ar: {
        home: "الرئيسية",
        about: "من نحن",
        products: "منتجاتنا",
        contact: "تواصل معنا",
        heroTitle: "قطع غيار وإكسسوارات سيارات متميزة",
        heroSubtitle: "الوكيل الحصري لشركة بيكمير التركية في اليمن.",
        shopNow: "تسوق الآن",
        learnMore: "اعرف المزيد",
        featuredProducts: "منتجات مميزة",
        viewAll: "عرض الكل",
        footerText: "© 2024 محلات صعده. جميع الحقوق محفوظة.",
        aboutTitle: "من نحن",
        aboutSubtitle: "قصة نجاح وتميز في عالم قطع غيار السيارات",
        ourStory: "قصتنا",
        storyText1: "تأسست محلات صعده برؤية واضحة لتوفير أفضل قطع غيار السيارات في السوق اليمني. نحن نؤمن بأن الجودة هي أساس السلامة، ولذلك نسعى جاهدين لتقديم منتجات أصلية وموثوقة لعملائنا الكرام.",
        storyText2: "نفتخر بكوننا الوكيل الحصري لشركة بيكمير (Beklemer) التركية في اليمن، مما يتيح لنا تقديم منتجات عالية الجودة بمعايير أوروبية وأسعار تنافسية.",
        partnershipTitle: "شراكتنا مع بيكمير",
        partnershipText: "تعتبر شركة بيكمير التركية من الشركات الرائدة في مجال تصنيع قطع غيار السيارات. بصفتنا الوكيل الوحيد في اليمن، نضمن لعملائنا الحصول على قطع غيار أصلية ومضمونة مباشرة من المصنع.",
        feature1: "جودة أوروبية عالية",
        feature2: "ضمان حقيقي",
        feature3: "أسعار تنافسية",
        teamTitle: "فريقنا",
        manager: "المدير العام",
        sales: "مدير المبيعات",
        support: "خدمة العملاء",
        productsTitle: "منتجاتنا",
        productsSubtitle: "اكتشف مجموعتنا الواسعة من قطع الغيار الأصلية",
        all: "الكل",
        batteries: "بطاريات",
        brakes: "فرامل",
        solar: "طاقة شمسية",
        parts: "قطع غيار",
        askPrice: "اسأل عن السعر",
        prod1Title: "بطارية 70 أمبير",
        prod1Desc: "أداء عالي وعمر طويل",
        prod2Title: "فحمات فرامل أمامية",
        prod2Desc: "متوافقة مع تويوتا",
        prod3Title: "لوح شمسي 150 وات",
        prod3Desc: "كفاءة عالية",
        prod4Title: "طقم إصلاح محرك",
        prod4Desc: "قطع أصلية",
        prod5Title: "فحمات فرامل خلفية",
        prod5Desc: "جودة بيكمير",
        contactTitle: "تواصل معنا",
        contactSubtitle: "نحن هنا لمساعدتك في العثور على ما تحتاج",
        getInTouch: "ابقى على تواصل",
        address: "صنعاء، اليمن - شارع تعز",
        name: "الاسم",
        email: "البريد الإلكتروني",
        message: "الرسالة",
        sendMessage: "إرسال الرسالة",
        missionTitle: "رؤيتنا ومهمتنا",
        missionText: "نسعى في محلات صعده لتقديم أفضل حلول قطع غيار السيارات في اليمن، مع التركيز على الجودة والموثوقية. شراكتنا مع بيكمير التركية تضمن لكم منتجات تدوم طويلاً وتحافظ على سلامة مركباتكم.",
        quality: "جودة عالية",
        price: "سعر منافس",
        service: "خدمة متميزة"
    }
};

document.addEventListener('DOMContentLoaded', () => {
    // Filter Logic
    const filterBtns = document.querySelectorAll('.filter-btn');
    const productCards = document.querySelectorAll('.product-card');

    if (filterBtns.length > 0) {
        filterBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                // Remove active class from all
                filterBtns.forEach(b => b.classList.remove('active'));
                // Add active to clicked
                btn.classList.add('active');

                const filter = btn.getAttribute('data-filter');

                productCards.forEach(card => {
                    if (filter === 'all' || card.getAttribute('data-category') === filter) {
                        card.style.display = 'block';
                        // Add animation class to re-trigger fade in
                        card.classList.remove('fade-in-up');
                        void card.offsetWidth; // Trigger reflow
                        card.classList.add('fade-in-up');
                    } else {
                        card.style.display = 'none';
                    }
                });
            });
        });
    }
    // Language Switcher Logic
    const langSwitchBtn = document.getElementById('lang-switch');
    const htmlEl = document.documentElement;

    // Check saved language or default to Arabic
    const savedLang = localStorage.getItem('saada_lang') || 'ar';
    setLanguage(savedLang);

    if (langSwitchBtn) {
        langSwitchBtn.addEventListener('click', () => {
            const currentLang = htmlEl.getAttribute('lang');
            const newLang = currentLang === 'ar' ? 'en' : 'ar';
            setLanguage(newLang);
        });
    }

    function setLanguage(lang) {
        htmlEl.setAttribute('lang', lang);
        htmlEl.setAttribute('dir', lang === 'ar' ? 'rtl' : 'ltr');
        localStorage.setItem('saada_lang', lang);

        // Update Text Content
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (translations[lang][key]) {
                el.textContent = translations[lang][key];
            }
        });

        // Update Button Text
        if (langSwitchBtn) {
            langSwitchBtn.textContent = lang === 'ar' ? 'English' : 'العربية';
        }
    }

    // Mobile Menu Logic
    const mobileBtn = document.querySelector('.mobile-menu-btn');
    const navLinks = document.querySelector('.nav-links');

    if (mobileBtn && navLinks) {
        mobileBtn.addEventListener('click', () => {
            navLinks.classList.toggle('active');
            const icon = mobileBtn.querySelector('i');
            if (icon) {
                icon.classList.toggle('fa-bars');
                icon.classList.toggle('fa-times');
            }
        });
    }

    // Scroll Animation Observer
    const observerOptions = {
        threshold: 0.1
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('fade-in-up');
                observer.unobserve(entry.target);
            }
        });
    }, observerOptions);

    document.querySelectorAll('.animate-on-scroll').forEach(el => {
        observer.observe(el);
    });
});
